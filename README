README
Oct. 06, 2004

==============================================================================

BUILDING FROM CVS:

You should run bootstrap from the main directory to correctly initialize
the project.  From there, run configure as you would normally.  Installation
is not automatic so there is no make install target.  Configure options are
explained below.

    $ ./bootstrap && ./configure && make

==============================================================================

BUILDING FROM TARBALL:

As you would expect, run configure and make.  Installation is not automatic
so there is no make install target.  Configure options are explained below.

    $ ./configure && make

==============================================================================

CONFIGURE OPTIONS:

This file contains hints for building the sources.  There are a number of
build targets, some of which are not built automatically.  Here is the
breakdown (input.o is only for kernel 2.4).

      wacom.o: not built by default (--enable-wacom, --disable-wacom)
      wacdump: built by default (--enable-wacdump, --disable-wacdump)
        hid.o: not built by default (--enable-hid, --disable-hid)
      evdev.o: not built by default (--enable-evdev, --disable-evdev)
   mousedev.o: not built by default (--enable-mousedev, --disable-mousedev)
   usbmouse.o: not built by default (--enable-usbmouse, --disable-usbmouse)
      input.o: not built by default (--enable-input, --disable-input)
  wacom_drv.o: built by default (--enable-wacomdrv, --disable-wacomdrv)

BUILDING:

Generally, you run the configure script followed by make.  This package
will not attempt to install the kernel drivers.  Please see the documentation on
the website for more information on where specific drivers belong.

    [root@haku linuxwacom-dev] # ./configure
    [root@haku linuxwacom-dev] # make
    [root@haku linuxwacom-dev] # make install (will install wacom_drv.o and wacomcpl)

There are many options, and configure will attempt to guess the correct
values for most of them.  By default, only wacom_drv.o and wacdump
program are built.

REQUIREMENTS:

wacom.o, hid.o, and usbmouse are kernel modules and require the kernel
sources to be present.  On a Redhat 8.0 system with the kernel-sources
RPM installed, the source directory is located at /usr/src/linux-2.4.
The wacdump configuration script will search for this directory
automatically as well as /usr/src/linux.  You can override the directory
using the --with-kernel=<directory> option.

wacom_drv.o requires the XFree86 sources as well as a functional XF86
build environment.  Since this is a more complicated setup and few people
are going to want to rebuild this driver from source, the wacom_drv.o file
is supplied with the wacdump package in the prebuilt directory.  It is
compiled with gcc 3.2 under Redhat 8.0.  If the prebuilt wacom_drv.o module
will not work for you, see the section "Building wacom_drv.o From Scratch."
	
BUILDING wacom_drv.o FROM SCRATCH

You will need the XFree86 source code, and you will need to actually build
it.  The file xf86Version.h is generated during the build process and is a
required dependency for building wacom_drv.o.  The configure script will 
attempt to build wacom-drv.o by default,  but you need to provide the 
--with-xf86=<xf86_directory> option.  If you don't want to build wacom-drv.o, 
the option --disable-wacomdrv needs to be provided.

If the xf86Version.h file is located at:
	/usr/local/src/XFree86-4.2.0/xc/programs/Xserver/include/xf86Version.h

Then the correct configure option to build wacom_drv.o would be:
	--with-xf86=/usr/local/src/XFree86-4.2.0

INSTALL wacomcpl 

wacomcpl is a tcl/tk based control panel. It requires tcl/tk being installed. 
The configure script will attempt to build wacomxi libs by searching /usr/include 
and /usr/lib for tcl and tk hearders and libs. You can override the directories
using the --with-tcl=<directory> and --with-tk=<directory> options.

If the tcl.h is located at /usr/local/tcl8.4/include and the libtcl8.4.so at 
/usr/local/tcl8.4/lib, you need to:

First link /usr/local/tcl8.4/lib/libtcl8.4.so to /usr/lib/libtcl.so.0:
	ln -s /usr/local/tcl8.4/lib/libtcl8.4.so /usr/lib/libtcl.so.0

Then use the configure option:
	--with-tcl=/usr/local/tcl8.4

If the tk.h is located at /usr/local/tk8.4/include and the libtk8.4.so at 
/usr/local/tk8.4/lib, then the correct steps would be:
	ln -s /usr/local/tk8.4/lib/libtk8.4.so /usr/lib/libtk.so.0

Then use the configure option:
	--with-tk=/usr/local/tk8.4

If both tcl and tk under the same directory, say /usr/local/tcl8.4, then the steps are:
	ln -s /usr/local/tcl8.4/lib/libtcl8.4.so /usr/lib/libtcl.so.0
	ln -s /usr/local/tcl8.4/lib/libtk8.4.so /usr/lib/libtk.so.0

And use the configure option:
	--with-tcl=/usr/local/tcl8.4


INSTALL kernel pieces

for kernel 2.4.22 or newer: 
    [root@haku linuxwacom-dev] # cp src/2.4.22/hid.o /lib/modules/your_kernel_version/kernel/drivers/usb 
    [root@haku linuxwacom-dev] # cp src/2.4.22/usbmouse.o /lib/modules/your_kernel_version/kernel/drivers/usb
    [root@haku linuxwacom-dev] # cp src/2.4.22/wacom.o /lib/modules/your_kernel_version/kernel/drivers/usb 
    [root@haku linuxwacom-dev] # cp src/2.4.22/mousedev.o /lib/modules/your_kernel_version/kernel/drivers/input 
    [root@haku linuxwacom-dev] # cp src/2.4.22/evdev.o /lib/modules/your_kernel_version/kernel/drivers/input
    [root@haku linuxwacom-dev] # cp src/2.4.22/input.o /lib/modules/your_kernel_version/kernel/drivers/input 

for kernels older than 2.4.22: 
    [root@haku linuxwacom-dev] # cp src/2.4/hid.o /lib/modules/your_kernel_version/kernel/drivers/usb 
    [root@haku linuxwacom-dev] # cp src/2.4/usbmouse.o /lib/modules/your_kernel_version/kernel/drivers/usb
    [root@haku linuxwacom-dev] # cp src/2.4/wacom.o /lib/modules/your_kernel_version/kernel/drivers/usb 
    [root@haku linuxwacom-dev] # cp src/2.4/mousedev.o /lib/modules/your_kernel_version/kernel/drivers/input 
    [root@haku linuxwacom-dev] # cp src/2.4/evdev.o /lib/modules/your_kernel_version/kernel/drivers/input
    [root@haku linuxwacom-dev] # cp src/2.4/input.o /lib/modules/your_kernel_version/kernel/drivers/input 

for kernel 2.6
    [root@haku linuxwacom-dev] # cd kernel_src_dir
    [root@haku linuxwacom-dev] # make install
    [root@haku linuxwacom-dev] # make modules_install

==============================================================================

WEBSITE: http://linuxwacom.sf.net
   HELP: jej@j-arkadia.com
